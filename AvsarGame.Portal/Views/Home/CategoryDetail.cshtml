@model AvsarGame.API.Models.CategoryGameModel

@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<div class="page-wrapper">
    <main class="Main">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-6">
                    <h3 class="title-primary">@Model.Category.Name</h3>
                </div>
                <div class="col-6">
                    <p class="text-right page-info">
                        GB alım satımları TRADE ile yapılmaktadır.
                    </p>
                </div>
            </div>
            <div class="row section" style=" display: none;">
                <div class="col-12">
                    <div class="banner-container">
                        <img class="banner-img" src="https://cdn2-www.gamerevolution.com/assets/uploads/2012/03/file_2409_ME3.jpg" alt="">
                        <div class="notification notification-bottom">
                            20 Mart 2020'de Sizlerle!
                        </div>
                    </div>
                </div>
            </div>
            <div class="row section">
                <div class="order-lg-1 order-2 col-12 col-lg-3 recommended side">
                    <div class="row">
                        <div class="col-12 col-sm-6 col-lg-12">
                            <img class="recommended-img mt-3 mb-5" src="/Uploads/@Model.Category.ImageUrl" alt="">
                        </div>
                        <div class="col-12 col-sm-6 col-lg-12">
                            <div class="title-secondary led led-below">Açıklama</div>
                            <div class="recommended-text pt-3">
                                <p>
                                    @Model.Category.Description
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-9 col-12 order-lg-2 order-1 product-container">
                    @foreach (var game in Model.Games)
                    {
                        <div class="row product">
                            <div class="col-md-3 col-sm-5 col-12">
                                <div class="product-img-container">
                                    <img src="/Uploads/@game.ImageUrl" alt="" class="product-img">
                                    <div class="notification notification-top-left">
                                        @*%20 indirim*@
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-9 col-sm-7 col-12 d-flex flex-column product-info">
                                <div class="row h-100">
                                    <div class="col-12">
                                        <h4 class="title-secondary led led-below">
                                            @game.Name
                                        </h4>
                                    </div>
                                    <div class="col-12">
                                        <p class="product-text">Folk Village / En az 50 m</p>
                                    </div>
                                </div>
                                <div class="row h-100">
                                    <div class="col-12 col-lg-6 d-flex justify-content-start justify-content-lg-between start product-trade">
                                        <div class="product-sell mr-4">
                                            <div class="trade-icon"></div>
                                            <span class="trade-text">SATIŞ:</span>
                                            <span class="trade-price">@game.SellPrice</span>
                                        </div>
                                        <div class="product-buy">
                                            <div class="trade-icon"></div>
                                            <span class="trade-text">ALIŞ:</span>
                                            <span class="trade-price">@game.BuyPrice</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="row align-items-end h-100">
                                    <div class="col-12 d-flex justify-content-start justify-content-sm-end mt-4">
                                        <button id ="sell" class="button btn-outline mr-4">Satış Yap</button>
                                        <button data-id="@game.Id" id ="buy" class="button btn-blue">Satın Al</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    }
                    <div class="row">
                        <div class="col-12">
                            <nav aria-label="...">
                                <ul class="pagination justify-content-center">
                                    <li class="page-item pagination-left disabled">
                                        <a href="#" class="page-link">
                                            <svg width="16px" height="16px" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                                                <!-- Generator: sketchtool 63 (101010) - https://sketch.com -->
                                                <title>60335B23-74EB-4C6F-9652-C4FAA435BA8D</title>
                                                <desc>Created with sketchtool.</desc>
                                                <g id="Page-1" stroke="none" stroke-width="1">
                                                    <g id="left-arrow" transform="translate(-1234.000000, -830.000000)" fill="#FFFFFF" fill-rule="nonzero">
                                                        <g id="most-popular" transform="translate(164.000000, 825.000000)">
                                                            <g id="slider-nav" transform="translate(1070.000000, 5.000000)">
                                                                <g id="arrow-right-solid-copy" transform="translate(8.000000, 8.000000) scale(-1, 1) translate(-8.000000, -8.000000) translate(0.000000, 0.000000)">
                                                                    <path d="M6.78841871,1.09223744 L7.57951002,0.281278539 C7.91447661,-0.0621004566 8.45612472,-0.0621004566 8.78752784,0.281278539 L15.714922,7.37899543 C16.0498886,7.72237443 16.0498886,8.27762557 15.714922,8.6173516 L8.78752784,15.7187215 C8.45256125,16.0621005 7.91091314,16.0621005 7.57951002,15.7187215 L6.78841871,14.9077626 C6.44988864,14.5607306 6.45701559,13.9945205 6.80267261,13.6547945 L11.0966592,9.46118721 L0.855233853,9.46118721 C0.381291759,9.46118721 0,9.07031963 0,8.58447489 L0,7.41552511 C0,6.92968037 0.381291759,6.53881279 0.855233853,6.53881279 L11.0966592,6.53881279 L6.80267261,2.34520548 C6.45345212,2.00547945 6.44632517,1.43926941 6.78841871,1.09223744 Z" id="Path"></path>
                                                                </g>
                                                            </g>
                                                        </g>
                                                    </g>
                                                </g>
                                            </svg>
                                        </a>
                                    </li>
                                    <li class="page-item">
                                        <a class="page-link" href="#">1</a>
                                    </li>
                                    <li class="page-item active">
                                        <span class="page-link">
                                            2
                                            <span class="sr-only">(current)</span>
                                        </span>
                                    </li>
                                    <li class="page-item">
                                        <a class="page-link" href="#">3</a>
                                    </li>
                                    <li class="page-item">
                                        <a class="page-link" href="#">4</a>
                                    </li>
                                    <li class="page-item pagination-right active">
                                        <a href="#" class="page-link">
                                            <svg width="16px" height="16px" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                                                <!-- Generator: sketchtool 63 (101010) - https://sketch.com -->
                                                <title>60335B23-74EB-4C6F-9652-C4FAA435BA8D</title>
                                                <desc>Created with sketchtool.</desc>
                                                <g id="Page-1" stroke="none" stroke-width="1">
                                                    <g id="left-arrow" transform="translate(-1234.000000, -830.000000)" fill="#FFFFFF" fill-rule="nonzero">
                                                        <g id="most-popular" transform="translate(164.000000, 825.000000)">
                                                            <g id="slider-nav" transform="translate(1070.000000, 5.000000)">
                                                                <g id="arrow-right-solid-copy" transform="translate(8.000000, 8.000000) scale(-1, 1) translate(-8.000000, -8.000000) translate(0.000000, 0.000000)">
                                                                    <path d="M6.78841871,1.09223744 L7.57951002,0.281278539 C7.91447661,-0.0621004566 8.45612472,-0.0621004566 8.78752784,0.281278539 L15.714922,7.37899543 C16.0498886,7.72237443 16.0498886,8.27762557 15.714922,8.6173516 L8.78752784,15.7187215 C8.45256125,16.0621005 7.91091314,16.0621005 7.57951002,15.7187215 L6.78841871,14.9077626 C6.44988864,14.5607306 6.45701559,13.9945205 6.80267261,13.6547945 L11.0966592,9.46118721 L0.855233853,9.46118721 C0.381291759,9.46118721 0,9.07031963 0,8.58447489 L0,7.41552511 C0,6.92968037 0.381291759,6.53881279 0.855233853,6.53881279 L11.0966592,6.53881279 L6.80267261,2.34520548 C6.45345212,2.00547945 6.44632517,1.43926941 6.78841871,1.09223744 Z" id="Path"></path>
                                                                </g>
                                                            </g>
                                                        </g>
                                                    </g>
                                                </g>
                                            </svg>
                                        </a>
                                    </li>
                                </ul>
                            </nav>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
</div>

<div class="modal fade" id="amountModal" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="tab-content">
                <div class="tab-pane fade terms-link"  role="tabpanel">
                    <!--Body-->
                    <div class="modal-body">
                        <form class="needs-validation" novalidate>
                            <div class="form-row form-group">
                                <div class="col-12">
                                    <label class="label-white" data-error="wrong" data-success="right"
                                           for="current-email">
                                        Miktar
                                    </label>
                                    <input type="email" id="amount" class="form-control"
                                           placeholder="Miktar" required />
                                </div>
                            </div>
                            <div class="form-row form-group">
                                <div class="col-12">
                                    <button id="amountOk" class="button btn-blue w-100" type="submit">
                                        Tamam
                                    </button>
                                </div>
                            </div>
                        </form>
                        <div class="modal-close">Kapat</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(document).ready(function() {
        $(".product-container #buy").click(function() {
            var id = $(this).attr('data-id');

            $.ajax({
                type: 'post',
                url: '/Sepetim/AddChart',
                content: "application/json; charset=utf-8",
                dataType: 'json',
                data: {id : id},
                success: function (res) {
                    if (res.success) {
                        $("#chart")[0].classList.remove("passive");
                        $("#chart")[0].getElementsByTagName('a')[0].classList.add("chartCss");

                        $("#chartSpan")[0].innerHTML = '(' + res.count + ')';
                        Command: toastr["success"]("Ürün sepete eklendi");
                    } else {
                        Command: toastr["error"]("Ürün sepete eklenemedi");
                    }
                },
                error: function (err) {
                    Command: toastr["error"]("Ürün sepete eklenemedi");
                }
            });
        });
    });
 
</script>